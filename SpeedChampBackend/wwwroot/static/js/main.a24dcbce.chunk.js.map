{"version":3,"sources":["App.js","index.js","StatsItem.js"],"names":["selectOptions","value","label","BASE_URL","App","useState","size","meta","setMeta","duration","undefined","upload","download","result","setResult","initArray","myArray","ArrayBuffer","longInt8View","Uint8Array","i","length","start","a","data","Date","axios","get","onDownloadProgress","progressEvent","calculateSpeed","post","Buffer","from","headers","onUploadProgress","then","response","pe","now","console","log","loaded","className","onClick","onChange","e","target","map","option","prefix","suffix","toFixed","ReactDOM","render","document","getElementById","StatsItem","children"],"mappings":"6NAIMA,EAAgB,CAErB,CAAEC,MAAO,IAAYC,MAAO,UAMvBC,EAAW,yBAoIFC,IAlIH,WACX,MAAwBC,mBAAS,CAChCC,KAAMN,EAAc,GAAGC,QADxB,mBAAOM,EAAP,KAAaC,EAAb,KAIA,EAA4BH,mBAAS,CACpCI,cAAUC,EACVC,YAAQD,EACRE,cAAUF,IAHX,mBAAOG,EAAP,KAAeC,EAAf,KAMMC,EAAY,WAKjB,IAJA,IAAIC,EAAU,IAAIC,YAAYV,EAAKD,MAC/BY,EAAe,IAAIC,WAAWH,GAGzBI,EAAI,EAAGA,EAAIF,EAAaG,OAAQD,IACxCF,EAAaE,GAAKA,EAAI,IAGvB,OAAOF,GAGFI,EAAK,uCAAG,8BAAAC,EAAA,6DACPC,EAAOT,IACPO,EAAQ,IAAIG,KAFL,SAIPC,IAAMC,IAAN,UAAaxB,EAAb,SAA8B,CACnCyB,mBAAoB,SAACC,GACpBf,GAAU,SAAAD,GAAM,kCACZA,GADY,IAEfD,SAAUkB,EAAeD,EAAeP,WAR9B,OAabI,IAAMK,KAAN,UAAc5B,EAAd,OAA6B6B,EAAOC,KAAKT,GAAO,CAC/CU,QAAS,CAAE,eAAgB,qBAC3BC,iBAAkB,SAACN,GAClBf,GAAU,SAAAD,GAAM,kCACZA,GADY,IAEfF,OAAQmB,EAAeD,EAAeP,WAIxCc,MAAK,SAAAC,OAtBO,2CAAH,qDAiCLP,EAAiB,SAACQ,EAAIhB,GAC3B,IAAMiB,EAAM,IAAId,KAWhB,OALAe,QAAQC,IAAIH,EAAIhB,GAENgB,EAAGI,SAAWH,EAAMjB,GAAS,KACtB,KAAO,KAAO,GAoBhC,OACC,sBAAKqB,UAAU,2BAAf,UAEC,oBAAIA,UAAU,sCAAd,wBACA,sBAAKA,UAAU,wBAAf,UACC,wBACCA,UAAU,iEACVC,QAAS,kBAAMtB,KAFhB,+BAMA,wBAAQrB,MAAOM,EAAKD,KAAMuC,SAAU,SAAAC,GAAC,OAAItC,EAAQ,2BAAKD,GAAN,IAAYD,KAAMwC,EAAEC,OAAO9C,UAAU0C,UAAU,gBAA/F,SACE3C,EAAcgD,KAAI,SAAAC,GAAM,OACxB,wBAA2BhD,MAAOgD,EAAOhD,MAAzC,SAAiDgD,EAAO/C,OAA3C+C,EAAOhD,eAIvB,sBAAK0C,UAAU,qCAAf,UACC,cAAC,IAAD,CAAWO,OAAO,OAAOC,OAAO,KAAhC,eAGA,cAAC,IAAD,CAAWD,OAAO,WAAWC,OAAO,SAApC,SACGtC,EAAOD,SACR,+BAAOC,EAAOD,SAASwC,QAAQ,KAC5B,MAEL,cAAC,IAAD,CAAWF,OAAO,SAASC,OAAO,SAAlC,SACItC,EAAOF,OACT,+BAAOE,EAAOF,OAAOyC,QAAQ,KAC1B,WAGHvC,EAAOJ,UACT,sBAAKkC,UAAU,cAAf,kBAEC,sBAAKA,UAAU,qBAAf,UACE9B,EAAOJ,SAAW,IADpB,gB,yDCvIL,wDAKA4C,IAASC,OACR,cAAC,IAAD,IACAC,SAASC,eAAe,U,+DCGVC,IAVG,SAAC,GAAkC,IAAhCP,EAA+B,EAA/BA,OAAQQ,EAAuB,EAAvBA,SAAUP,EAAa,EAAbA,OACnC,OACI,gCACI,mBAAGR,UAAU,YAAb,SAA0BO,IAC1B,mBAAGP,UAAU,0BAAb,SAAwCe,IACxC,4BAAIP,U","file":"static/js/main.a24dcbce.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport StatsItem from \"./StatsItem\";\n\nconst selectOptions = [\n\t// { value: 10 * Math.pow(2, 20), label: \"10 MB\" },\n\t{ value: 20_000_000, label: \"20 MB\" },\n\t// { value: 100 * Math.pow(2, 20), label: \"100 MB\" },\n\t// { value: 1000 * Math.pow(2, 20), label: \"1000 MB\" }\n];\n\n// const BASE_URL = process.env.NODE_ENV === \"development\" ? \"http://localhost:5000\": \"https://speedchamp.org\";\nconst BASE_URL = \"https://speedchamp.org\";\n\nconst App = () => {\n\tconst [meta, setMeta] = useState({\n\t\tsize: selectOptions[0].value\n\t});\n\n\tconst [result, setResult] = useState({\n\t\tduration: undefined,\n\t\tupload: undefined,\n\t\tdownload: undefined\n\t});\n\n\tconst initArray = () => {\n\t\tlet myArray = new ArrayBuffer(meta.size);\n\t\tlet longInt8View = new Uint8Array(myArray);\n\n\t\t// generate some data\n\t\tfor (let i = 0; i < longInt8View.length; i++) {\n\t\t\tlongInt8View[i] = i % 256;\n\t\t}\n\n\t\treturn longInt8View;\n\t};\n\n\tconst start = async () => {\n\t\tconst data = initArray();\n\t\tconst start = new Date();\n\n\t\tawait axios.get(`${BASE_URL}/down`, {\n\t\t\tonDownloadProgress: (progressEvent) => {\n\t\t\t\tsetResult(result => ({\n\t\t\t\t\t...result,\n\t\t\t\t\tdownload: calculateSpeed(progressEvent, start)\n\t\t\t\t}))\n\t\t\t}\n\t\t});\n\n\t\taxios.post(`${BASE_URL}/up`, Buffer.from(data), {\n\t\t\theaders: { \"Content-Type\": \"text/octet-stream\" },\n\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\tsetResult(result => ({\n\t\t\t\t\t...result,\n\t\t\t\t\tupload: calculateSpeed(progressEvent, start)\n\t\t\t\t}))\n\t\t\t}\n\t\t})\n\t\t.then(response => {\n\t\t\t/* const end = new Date();\n\t\t\tconst duration = end - start;\n\n\t\t\tsetResult(result => ({\n\t\t\t\t...result,\n\t\t\t\tduration\n\t\t\t})); */\n\t\t});\n\t};\n\n\tconst calculateSpeed = (pe, start) => {\n\t\tconst now = new Date();\n\n\t\t/* if (!(pe.lengthComputable && pe.total > 0)) {\n\t\t\treturn undefined;\n\t\t} */\n\n\t\tconsole.log(pe, start);\n\n\t\tlet bps = pe.loaded / ((now - start) / 1000);\n\t\tlet mbps = bps / 1024 / 1024 * 8;\n\n\t\treturn mbps;\n\t};\n\n\tconst formatBytes = (bytes, decimals = 2) => {\n\t\tif (bytes === 0) {\n\t\t\treturn \"0 Bytes\";\n\t\t}\n\n\t\tconst k = 1024;\n\t\tconst dm = decimals < 0 ? 0 : decimals;\n\t\tconst sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\n\t\treturn parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\n\t};\n\n\t// console.log(result);\n\n\treturn (\n\t\t<div className=\"mx-auto w-3/5 space-y-12\">\n\t\t\t{/* <img src=\"/kekw.jpg\" className=\"w-1/5 mt-12 mx-auto\" /> */}\n\t\t\t<h1 className=\"text-4xl font-bold text-center mt-6\">SpeedChamp</h1>\n\t\t\t<div className=\"text-center space-y-3\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"px-6 py-3 text-center bg-blue-600 font-bold text-white rounded\"\n\t\t\t\t\tonClick={() => start()}\n\t\t\t\t>\n\t\t\t\t\tSpeedtest starten\n\t\t\t\t</button>\n\t\t\t\t<select value={meta.size} onChange={e => setMeta({ ...meta, size: e.target.value })} className=\"block mx-auto\">\n\t\t\t\t\t{selectOptions.map(option =>(\n\t\t\t\t\t\t<option key={option.value} value={option.value}>{option.label}</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"grid grid-cols-3 gap-6 text-center\">\n\t\t\t\t<StatsItem prefix=\"Ping\" suffix=\"ms\">\n\t\t\t\t\t-\n\t\t\t\t</StatsItem>\n\t\t\t\t<StatsItem prefix=\"Download\" suffix=\"Mbit/s\">\n\t\t\t\t{!!result.download ? (\n\t\t\t\t\t\t<span>{result.download.toFixed(2)}</span>\n\t\t\t\t\t) : \"-\"}\n\t\t\t\t</StatsItem>\n\t\t\t\t<StatsItem prefix=\"Upload\" suffix=\"Mbit/s\">\n\t\t\t\t\t{!!result.upload ? (\n\t\t\t\t\t\t<span>{result.upload.toFixed(2)}</span>\n\t\t\t\t\t) : \"-\"}\n\t\t\t\t</StatsItem>\n\t\t\t</div>\n\t\t\t{!!result.duration && (\n\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\tDauer\n\t\t\t\t\t<div className=\"text-3xl font-bold\">\n\t\t\t\t\t\t{result.duration / 1000}s\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById(\"root\")\n);","const StatsItem = ({ prefix, children, suffix }) => {\r\n    return (\r\n        <div>\r\n            <p className=\"font-bold\">{prefix}</p>\r\n            <p className=\"font-bold text-3xl my-3\">{children}</p>\r\n            <p>{suffix}</p>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatsItem;"],"sourceRoot":""}